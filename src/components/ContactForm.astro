---
---

<form id="contact-form" class="space-y-6">
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
    <div>
      <label for="fullName" class="block text-sm font-medium text-charcoal mb-2">Full Name *</label>
      <input
        type="text"
        id="fullName"
        name="fullName"
        required
        class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-gold focus:border-gold outline-none transition-colors"
        placeholder="Jane Smith"
      />
    </div>
    <div>
      <label for="email" class="block text-sm font-medium text-charcoal mb-2">Email Address *</label>
      <input
        type="email"
        id="email"
        name="email"
        required
        class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-gold focus:border-gold outline-none transition-colors"
        placeholder="jane@business.com"
      />
    </div>
  </div>

  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
    <div>
      <label for="phoneNumber" class="block text-sm font-medium text-charcoal mb-2">Phone Number</label>
      <input
        type="tel"
        id="phoneNumber"
        name="phoneNumber"
        class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-gold focus:border-gold outline-none transition-colors"
        placeholder="(555) 123-4567"
      />
    </div>
    <div>
      <label for="bestTimeToCall" class="block text-sm font-medium text-charcoal mb-2">Best Time to Call</label>
      <select
        id="bestTimeToCall"
        name="bestTimeToCall"
        class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-gold focus:border-gold outline-none transition-colors bg-white"
      >
        <option value="">Select a time...</option>
        <option value="Morning">Morning</option>
        <option value="Afternoon">Afternoon</option>
        <option value="Evening">Evening</option>
      </select>
    </div>
  </div>

  <div>
    <label for="businessName" class="block text-sm font-medium text-charcoal mb-2">Business Name</label>
    <input
      type="text"
      id="businessName"
      name="businessName"
      class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-gold focus:border-gold outline-none transition-colors"
      placeholder="Your Business Name"
    />
  </div>

  <div>
    <label for="interestedIn" class="block text-sm font-medium text-charcoal mb-2">What are you interested in?</label>
    <select
      id="interestedIn"
      name="interestedIn"
      class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-gold focus:border-gold outline-none transition-colors bg-white"
    >
      <option value="">Select an option...</option>
      <option value="AI Readiness Assessment">AI Readiness Assessment</option>
      <option value="Strategy Development">Strategy Development</option>
      <option value="Implementation Guidance">Implementation Guidance</option>
      <option value="Team Training">Team Training</option>
      <option value="General Guidance">General Guidance</option>
    </select>
  </div>

  <div>
    <label for="comments" class="block text-sm font-medium text-charcoal mb-2">Comments *</label>
    <textarea
      id="comments"
      name="comments"
      required
      rows="5"
      class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-gold focus:border-gold outline-none transition-colors resize-y"
      placeholder="Tell us about your business and what you're hoping to achieve..."
    ></textarea>
  </div>

  <button
    type="submit"
    id="submit-btn"
    class="w-full sm:w-auto bg-gold hover:bg-gold-light text-white px-8 py-4 rounded-lg text-lg font-semibold transition-colors"
  >
    Send Message
  </button>

</form>

<div id="form-success" class="hidden p-4 rounded-lg bg-green-50 border border-green-200 text-green-800">
  Thank you! We received your request and will contact you soon.
</div>

<div id="form-error" class="hidden p-4 rounded-lg bg-red-50 border border-red-200 text-red-800">
  Something went wrong. Please try again or email us directly at chris@hallidayinc.com.
</div>

<script>
  const form = document.getElementById('contact-form') as HTMLFormElement;
  const submitBtn = document.getElementById('submit-btn') as HTMLButtonElement;
  const successMsg = document.getElementById('form-success')!;
  const errorMsg = document.getElementById('form-error')!;

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    submitBtn.disabled = true;
    submitBtn.textContent = 'Sending...';
    errorMsg.classList.add('hidden');

    const formData = new FormData(form);
    const data: Record<string, string> = {};
    formData.forEach((value, key) => {
      data[key] = value as string;
    });

    try {
      const response = await fetch(
        'https://qncqegweobwyudatlomq.supabase.co/functions/v1/contact-form',
        {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data),
        }
      );

      if (!response.ok) throw new Error('Submission failed');

      form.classList.add('hidden');
      successMsg.classList.remove('hidden');
    } catch {
      errorMsg.classList.remove('hidden');
      submitBtn.disabled = false;
      submitBtn.textContent = 'Send Message';
    }
  });
</script>
